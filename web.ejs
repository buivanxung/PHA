<html>
  <head>
		<title>Node.js IL Chat</title>
		<script type="text/javascript" src="/js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script language="javascript">
			var socket;

			$(document).ready(function()
			{
				socket = io.connect('http://54.179.170.155:5000/');
				socket.on('message', function (data) {
					var content = $('#messages').html() + data + '<br/>';
					$('#messages').html(content);
          console.log(data);
				});
        socket.on('status_client', function(data) {
           $('#status').html(data);
          console.log(data);
        });
        socket.on('client_control', function (data) {
          if (data == "run") {
            $("input[name='run']").attr("disabled", "disabled");
            $("input[name='stop']").removeAttr("disabled");
            $('#status_running').html("System ready running!");
          }else if (data == "stop") {
            $("input[name='stop']").attr("disabled", "disabled");
            $("input[name='run']").removeAttr("disabled");
            $('#status_running').html("System ready stopping!");
          }else {
            $("input[type=submit]").attr("disabled", "disabled");
            $('#status_running').html("System Deny!");
          }
        })
        $("input[type=submit]").attr("disabled", "disabled");
        // $('input, textarea').change(function(){
        //    var validacao;
        //    // Armazena os valores dos campos
        //    var time = $('#numberTime').val();
        //    var samp = $('#numberSample').val();
        //
        //    if ( time == ' ' && samp == ' '  ) {
        //          validacao = false;
        //    }
        //    else if ( time != '' && samp != '' ) {
        //          validacao = true;
        //     }
        //    if(validacao == true) {
        //      $("input[type=submit]").removeAttr("disabled");
        //    }
        //  });

     // $('input:first').trigger('change');
        var samp1 = $("input[name='sample_1']");
        var samp2 = $("input[name='sample_2']");
        var samp3 = $("input[name='sample_3']");
        var samp4 = $("input[name='sample_4']");
        var condition = $("input[name='condition']");

        var chkId1 = '';
        var chkId2 = '';
        var chkId3 = '';
        var chkId4 = '';
        var conditionId = '';
        var numberTime = '';
        var numberSample = '';
        $('input').on('click', function() {
          numberSample = $('#numberSample').val();
          if (numberSample < 1 || numberSample > 4 || numberSample == '') {
            $('#status_sample').html("Sample Number Over Range Scope!");
          }else {
            $('#status_sample').html('');
          }
          numberTime = $('#numberTime').val();
          if (numberTime < 0 || numberTime > 500 || numberTime == '') {
            $('#status_time').html("Time Measuring Over Range Scope!");
          }else {
            $('#status_time').html('');
          }
          if (numberSample == 1) {
            $("input[name='sample_1']").prop("disabled", false);
            $("input[name='sample_2']").prop("disabled", true);
            $("input[name='sample_3']").prop("disabled", true);
            $("input[name='sample_4']").prop("disabled", true);
          } else if (numberSample == 2) {
            $("input[name='sample_1']").prop("disabled", false);
            $("input[name='sample_2']").prop("disabled", false);
            $("input[name='sample_3']").prop("disabled", true);
            $("input[name='sample_4']").prop("disabled", true);
          }else if (numberSample == 3) {
            $("input[name='sample_1']").prop("disabled", false);
            $("input[name='sample_2']").prop("disabled", false);
            $("input[name='sample_3']").prop("disabled", false);
            $("input[name='sample_4']").prop("disabled", true);
          }else if (numberSample == 4 ) {
            $("input[name='sample_1']").prop("disabled", false);
            $("input[name='sample_2']").prop("disabled", false);
            $("input[name='sample_3']").prop("disabled", false);
            $("input[name='sample_4']").prop("disabled", false);
          }else {
            $("input[name='sample_1']").prop("disabled", true);
            $("input[name='sample_2']").prop("disabled", true);
            $("input[name='sample_3']").prop("disabled", true);
            $("input[name='sample_4']").prop("disabled", true);
          }
          if (samp1.is(':checked')) {
            $("input[name='sample_1']:checked").each ( function() {
         			chkId1 = $(this).val() + ",";
              chkId1 = chkId1.slice(0, -1);

       	  });
             // alert ( $(this).val() ); // return all values of checkboxes checked
             // alert(chkId1); // return value of checkbox checked
          }
        });

        ////////////////////////
      });
      function postMessage()
			{
				if (socket) {
					socket.emit('message_server', $('#message').val());
				}
			}
      function run() {
        if (socket) {
					socket.emit('web_control_status', "run");
				}
          $("input[name='stop']").attr("disabled", "disabled");
          $("input[name='run']").removeAttr("disabled");
         $('#status_running').html("System ready running!");
         return true;
      }
      function stop() {
          if (socket) {
					socket.emit('web_control_status', "stop");
				 }
         $("input[name='run']").removeAttr("disabled");
         $("input[name='stop']").attr("disabled", "disabled");
         $('#status_running').html("System stopping");
         return true;
      }
		</script>

		<style>
			body {
				background-color:#3d5c5c;
				color: white;
			}
      table {
          /* border: 0.1px solid white; */
        }
      td, tr {
            height: 30;
            width: 120;
          }

      .button {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    }
    .input{
      border: none;
      color: blue;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
    }
    .label {
      text-align: center;
    }
		</style>

	</head>
	<body>
    <table style="width:100%; border: 0.1px solid white;" >
      <td style="width: 10%; background-color: #d0e2e2;" >
        <table >
        <tr >
          <td ><a href="#">Information</a></td>
        </tr>
        <tr >
          <td ><a href="#">Data</a></td>
        </tr>
        <tr >
          <td ><a href="#">Language</a></td>
        </tr>
        <tr >
          <td ><a href="#">Help</a></td>
        </tr>
      </table>
    </td>
      <td width = "90%">
  		<h2 class="white">Post your messages</h3>
  		<table>
  			<tr>
          <td class="white">Your Message:</td><td><input id="message" type="text" size="50"></td>
          <td>
            <button type="button" name="button" onclick = "postMessage()">Send</button>
          </td>
        </tr>
  		</table>
        <table>
          <tr>
            <td>
              <label for="">Measuring</label>
            </td>
            <td>
              <input id="numberTime" type="number" size="20">
            </td>
            <td>
              <select>
                <option value="second">Second</option>
                <option value="minute">Minute</option>
                <option value="hour">Hour</option>
                <option value="date">Date</option>
              </select>
            </td>
            <td>
               <input type="checkbox" name="sample_1" value="1"> Sample 1<br>
            </td>
            <td>
               <input type="checkbox" name="sample_2" value="2"> Sample 2<br>
            </td>
            <td>
            </td>
            <td>
                <input type="submit" name="run" onclick="return run();">
            </td>
            <td>
                <input type="submit" name="stop" onclick="return stop();">
            </td>
          </tr>
          <tr>
            <td>
              <label for="">Calibration</label>
            </td>
            <td>
            <input id="numberSample" type="number" size="20">
            </td>
            <td>
              <label for="">Samples</label>
            </td>
            <td>
               <input type="checkbox" name="sample_3" value="3"> Sample 3<br>
            </td>
            <td>
               <input type="checkbox" name="sample_4" value="4"> Sample 4<br>
            </td>
            <td>
               <input type="checkbox" name="condition" value="5"> Condition<br>
            </td>
            <td>
              <label for=""><strong><span id="status_running"></span></strong></label>
            </td>
          </tr>
          <label for=""><strong><span id="status_sample"></span></strong></label>
          <label for=""><strong><span id="status_time"></span></strong></label>
        </table>
        <h2 class="white">Messages</h3>
        <table style="width:100%; border: 0.1px solid white;">
          <tr>
            <td width="50%">
              <table>
                <td>
                  <p>Logger message</p>
                </td>
                  <div id="messages">
                  </div>
              </table>
            </td>
            <td width="50%">
              <table>
                <td></td>
                <td>
                   <h2>Samples</h2>
                </td>
              </table>
              <table>
                <tr>
                  <td><label for=""></label>
                  </td>
                  <td>
                    <label class="lable" for=""> Sample 1</label>
                  </td>
                  <td>
                    <label class="lable" for=""> Sample 2</label>
                  </td>
                  <td>
                    <label class="lable" for=""> Sample 3</label>
                  </td>
                  <td>
                    <label class="lable" for=""> Sample 4</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label class="lable" for="">Ca</label>
                  </td>
                  <td>
                    <label class="lable" for="">0.0</label>
                  </td>
                  <td>
                    <label class="lable" for="">0.0</label>
                  </td>
                  <td>
                    <label class="lable" for="">0.0</label>
                  </td>
                  <td>
                    <label class="lable" for="">0.0</label>
                  </td>
                  <td>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">Clo</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">Na</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">K</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">NH4</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">NO3</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">Temperature</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label for="">Time</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                  <td>
                    <label for="">0.0</label>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
        <table>
          <td>
          </td>
        </table>
        <table width = "100%">
          <td width = "100%">
            <table width = "100%">
              <td width = "40%">
                <label for="male">Status: <span id="status"></span></label>
              </td>
              <td width = "40%">
                <button class="button">AutoSave</button>
              </td>
            </table>
          </td>
        </table>
      </td>
      </table>
	</body>
</html>
